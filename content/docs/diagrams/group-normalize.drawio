<mxfile host="65bd71144e" modified="2026-02-19T00:00:00.000Z" agent="Cunning3D" version="1.0">
  <diagram id="group-normalize" name="Group Normalize">
    <mxGraphModel dx="1000" dy="700" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <mxCell id="title" value="Group Normalize (Fix Size Mismatch)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="150" y="20" width="520" height="30" as="geometry"/>
        </mxCell>

        <!-- Topology change -->
        <mxCell id="box1" value="Topology changed&#10;(point/prim count updated)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="90" y="110" width="300" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="box2" value="Old group bitset size&#10;still based on previous counts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="440" y="110" width="300" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="arr0" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="150" as="sourcePoint"/>
            <mxPoint x="440" y="150" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Example mask -->
        <mxCell id="maskBox" value="Example (Point Group)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="90" y="230" width="650" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="m1" value="Before normalize&#10;count=8&#10;mask=[1 0 1 0 0 1 0 0]" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;fontFamily=Courier New;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="110" y="265" width="260" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="m2" value="After topology change&#10;count=12" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;fontFamily=Courier New;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="380" y="265" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="m3" value="After normalize&#10;count=12&#10;mask=[1 0 1 0 0 1 0 0 0 0 0 0]" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;fontFamily=Courier New;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="540" y="265" width="190" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="arr1" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#82b366" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="360" y="305" as="sourcePoint"/>
            <mxPoint x="540" y="305" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="lbl" value="Normalize" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#82b366" vertex="1" parent="1">
          <mxGeometry x="420" y="285" width="100" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="note" value="Normalize resizes the internal bitmasks and avoids out-of-range reads. It does not recompute selection logic." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#666666" vertex="1" parent="1">
          <mxGeometry x="90" y="410" width="660" height="20" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

