---
title: Voxel Edit
description: Interactive GPU-accelerated voxel editor integrated into the procedural pipeline
icon: BoxSelect
---

<Lang lang="zh">
## 概览：程序化管线中的即时创造力

**Voxel Edit** 节点是 Cunning3D 交互式节点（Interactive Nodes）的旗舰示范。它不仅仅是一个“体素生成器”，而是一个**完整的、内嵌于节点图中的体素编辑器 DCC**。

打破了传统程序化建模（“写参数 -> 等结果”）与手工建模（“点鼠标 -> 改拓扑”）的界限。在 Voxel Edit 节点上，你可以像在 Minecraft 或 MagicaVoxel 中一样挥洒创意，而你所画下的每一笔，都会实时转化为程序化数据流，无缝流入后续的布尔运算、平滑处理或网格转换节点。

> **它既是工具，也是节点。**
</Lang>

<Lang lang="en">
## Overview: Instant Creativity in a Procedural Pipeline

The **Voxel Edit** node is the flagship demonstration of Cunning3D's **Interactive Nodes**. It is not just a "voxel generator", but a **full-featured Voxel Editor DCC embedded directly within the node graph**.

It breaks the boundary between procedural modeling ("tweak params -> wait") and manual modeling ("click mouse -> modify topology"). With Voxel Edit, you can unleash your creativity as if you were in Minecraft or MagicaVoxel, while every stroke you paint is instantly transformed into a procedural data stream, flowing seamlessly into subsequent Boolean, Smooth, or Meshing nodes.

> **It is both a tool and a node.**
</Lang>

<Drawio file="content/docs/diagrams/voxel-workflow.drawio" height={250} title="Hybrid Voxel Pipeline (Interactive)" />

---

## The "Coverlay" Experience

<Lang lang="zh">
这是 Cunning3D **Coverlay** 技术的集大成者。当你选中 Voxel Edit 节点时，不仅仅是属性面板在变化，整个视口（Viewport）都会被激活：

*   **Native Integration**: 编辑器 UI 直接悬浮在 3D 视口之上，与场景无缝融合。
*   **Context Aware**: 工具栏、调色板、笔刷设置随叫随到，点击节点即刻开始创作。
*   **Zero Context Switch**: 无需导出到外部软件，无需切换窗口。你的手工编辑就是程序化图的一部分。
</Lang>

<Lang lang="en">
This is the culmination of Cunning3D's **Coverlay** technology. When you select a Voxel Edit node, it's not just the property panel that changes—the entire Viewport comes alive:

*   **Native Integration**: Editor UI floats directly over the 3D viewport, seamlessly blending with the scene.
*   **Context Aware**: Toolbars, palettes, and brush settings appear on demand. Click the node, start creating.
*   **Zero Context Switch**: No exporting to external software, no window switching. Your manual edits are simply part of the procedural graph.
</Lang>

---

## Technical Highlights (Under the Hood)

<Lang lang="zh">
### 1. 极致性能：GPU Compute & Dirty Chunk Update
为了实现“像绘画一样流畅”的体素编辑，我们摒弃了传统的 CPU Greedy Meshing 方案。
*   **Compute Shader Instancing**: 每一笔操作产生的脏块（Dirty Chunks）会被增量上传。
*   **GPU Face Generation**: 利用计算着色器直接在 GPU 上生成面片实例（Face Instances），避免了 CPU 重建网格的开销。
*   **Result**: 即使在数百万体素的场景中，也能保持 120fps 的丝滑编辑体验。

<Drawio file="content/docs/diagrams/voxel-gpu-pipeline.drawio" height={300} title="GPU Extreme Render Path (Interactive)" />

### 2. 纯数据驱动：Command Stream
你在视口中的每一次点击、拖拽、绘制，本质上并不是在修改“模型”，而是在录制**命令流（Command Stream）**。
*   **Non-Destructive**: 你的编辑历史被序列化为 `cmds_json` 参数。
*   **Replayable**: 任何时候都可以重新播放、修改或由程序生成这些命令。
*   **Cross-Platform**: 这串 JSON 数据可以轻松同步到 Unity 运行时或 Web 端，让你的游戏玩家也能拥有同样的编辑能力。

<Drawio file="content/docs/diagrams/voxel-data-flow.drawio" height={260} title="Pure Data Driven Flow (Interactive)" />

### 3. 混合工作流（Hybrid Workflow）
*   **Hand + Proc**: 手绘一个粗糙的体素原型 -> 连入 `VDB Smooth` 变圆润 -> 连入 `Boolean` 挖孔 -> 连入 `VDB To Polygons` 生成最终网格。
*   **AI Ready**: 由于其基于离散网格（Discrete Grid）和命令流，它天然适合作为 AI 生成 3D 资产的中间格式。
</Lang>

<Lang lang="en">
### 1. Extreme Performance: GPU Compute & Dirty Chunk Update
To achieve "fluid, painting-like" voxel editing, we discarded traditional CPU Greedy Meshing.
*   **Compute Shader Instancing**: Dirty chunks generated by each stroke are uploaded incrementally.
*   **GPU Face Generation**: Compute shaders generate face instances directly on the GPU, avoiding CPU mesh reconstruction overhead.
*   **Result**: Silky smooth 120fps editing experience even with millions of voxels.

<Drawio file="content/docs/diagrams/voxel-gpu-pipeline.drawio" height={300} title="GPU Extreme Render Path (Interactive)" />

### 2. Pure Data Driven: Command Stream
Every click, drag, and stroke in the viewport is not modifying a "model", but recording a **Command Stream**.
*   **Non-Destructive**: Your edit history is serialized into the `cmds_json` parameter.
*   **Replayable**: Commands can be replayed, modified, or procedurally generated at any time.
*   **Cross-Platform**: This JSON data effortlessly syncs to Unity Runtime or Web, enabling the same editing capabilities for your players.

<Drawio file="content/docs/diagrams/voxel-data-flow.drawio" height={260} title="Pure Data Driven Flow (Interactive)" />

### 3. Hybrid Workflow
*   **Hand + Proc**: Hand-paint a rough voxel prototype -> Feed into `VDB Smooth` -> Cut holes with `Boolean` -> Generate final mesh with `VDB To Polygons`.
*   **AI Ready**: Its discrete grid and command stream nature make it an ideal intermediate format for AI-generated 3D assets.
</Lang>

---

## User Guide

<Lang lang="zh">
### 工具模式 (Toolbar)

Coverlay 面板提供了丰富的体素编辑工具，操作逻辑类似主流像素/体素软件：

| 模式 | 快捷键 | 描述 |
| :--- | :--- | :--- |
| **Add** | `1` | 添加体素。支持点、线、区域（Region）填充。 |
| **Select** | `2` | 选择体素区域。支持框选、面选、颜色选择。 |
| **Paint** | `3` | 为已有体素上色。不改变几何结构，只修改 Palette Index。 |
| **Move** | `4` | 移动选中的体素块。 |
| **Extrude** | `5` | 挤出体素表面。支持智能识别连通域。 |

### 笔刷设置 (Brush Settings)

*   **Shape**: Sphere, Cube, Cylinder, Diamond 等多种笔刷形状。
*   **Radius**: 笔刷大小调节。
*   **Mirror**: 支持 X/Y/Z 轴实时对称绘制，建筑师的最爱。

### 调色板 (Palette)

Voxel Edit 使用基于索引的颜色系统（Palette-based Color）。
*   **Palette Panel**: 可以在 Coverlay 中管理调色板，支持自定义颜色。
*   **Index Storage**: 每个体素只存储一个 `u8` 索引，极度节省内存。
</Lang>

<Lang lang="en">
### Tool Modes (Toolbar)

The Coverlay panel provides a rich set of voxel editing tools, similar to mainstream pixel/voxel software:

| Mode | Key | Description |
| :--- | :--- | :--- |
| **Add** | `1` | Add voxels. Supports Point, Line, Region fill. |
| **Select** | `2` | Select voxel regions. Supports Box, Face, Color selection. |
| **Paint** | `3` | Paint existing voxels. Modifies Palette Index without changing geometry. |
| **Move** | `4` | Move selected voxel blocks. |
| **Extrude** | `5` | Extrude voxel surfaces. Smart connectivity detection. |

### Brush Settings

*   **Shape**: Sphere, Cube, Cylinder, Diamond, and more.
*   **Radius**: Adjustable brush size.
*   **Mirror**: Real-time X/Y/Z symmetry, an architect's best friend.

### Palette

Voxel Edit uses a Palette-based Color system.
*   **Palette Panel**: Manage colors in the Coverlay, supports custom palettes.
*   **Index Storage**: Each voxel stores only a `u8` index, extremely memory efficient.
</Lang>

## Parameters

| Parameter | Type | Description |
| :--- | :--- | :--- |
| `voxel_size` | Float | The size of a single voxel unit (Grid spacing). |
| `cmds_json` | String | **(Read-only)** The serialized command history. Do not edit manually unless you are a wizard. |
| `palette_json` | String | **(Read-only)** The serialized color palette data. |

<Callout type="info">
**Pro Tip**: You can copy the `cmds_json` string from one Voxel Edit node to another to duplicate the geometry, or save it to a text file to backup your artwork!
</Callout>

