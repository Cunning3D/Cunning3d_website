<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cunning Player</title>
    <link rel="icon" href="data:," />
    <style>
      html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
      #bevy { width: 100%; height: 100%; display: block; }
    </style>
  </head>
  <body>
    <canvas id="bevy"></canvas>
    <script type="module">
      import init from "./cunning_player.js?v=31";
      const c = document.getElementById("bevy");
      // Prevent browser context menu / image-save UI on RMB (especially on Edge).
      c?.addEventListener("contextmenu", (e) => e.preventDefault());
      const show = (title, err) => {
        const msg = (err && (err.stack || err.message || String(err))) || "(unknown error)";
        console.error(title, err);
        const pre = document.getElementById("err") || (() => {
          const p = document.createElement("pre");
          p.id = "err";
          p.style.cssText = "position:fixed;left:0;top:0;right:0;max-height:50%;overflow:auto;background:rgba(0,0,0,.85);color:#f66;padding:12px;z-index:99999;white-space:pre-wrap;";
          document.body.appendChild(p);
          return p;
        })();
        pre.textContent = title + "\\n\\n" + msg;
      };
      window.addEventListener("error", (e) => show("Runtime error", e.error || e.message));
      window.addEventListener("unhandledrejection", (e) => show("Unhandled rejection", e.reason));
      init({ module_or_path: "./cunning_player_bg.wasm?v=31" }).catch((e) => {
        show("cunning_player init failed:", e);
      });
    </script>
  </body>
</html>
